<h2 class="text-lg font-semibold text-blue-700 mb-4">üìã Danh s√°ch b·ªánh nh√¢n</h2>

<!-- B·∫¢NG L·ªäCH KH√ÅM -->
<table class="w-full border mb-6">
  <thead class="bg-gray-100">
    <tr>
      <th class="p-2">T√™n b·ªánh nh√¢n</th>
      <th class="p-2">D·ªãch v·ª•</th>
      <th class="p-2">Ng√†y kh√°m</th>
      <th class="p-2">Thao t√°c</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let b of bookings">
      <td
        class="p-2 text-blue-600 hover:underline cursor-pointer"
        (click)="showMemberDetails(b.member?.memberId || b.memberId)"
      >
        {{ b.member?.name || b.memberName || ('BN #' + b.memberId) }}
      </td>
      <td class="p-2">{{ b.treatmentService?.name || b.serviceName }}</td>
      <td class="p-2">{{ b.dayBooking | date: 'dd/MM/yyyy' }}</td>
      <td class="p-2">
        <button
          (click)="selectBooking(b)"
          class="px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700"
        >
          Nh·∫Øc nh·ªü
        </button>
      </td>
    </tr>
  </tbody>
</table>

<!-- FORM NH·∫ÆC NH·ªû -->
<div *ngIf="selectedBooking" class="bg-gray-100 p-4 rounded shadow mt-4">
  <h3 class="text-lg font-semibold text-green-700 mb-3">
    G·ª≠i nh·∫Øc nh·ªü cho: {{ selectedBooking.member?.name || selectedBooking.memberName }}
  </h3>
  <div class="grid grid-cols-2 gap-4">
    <input
      type="time"
      [(ngModel)]="reminderForm.medicineTime"
      class="p-2 border rounded"
      placeholder="Gi·ªù u·ªëng thu·ªëc"
    />
    <input
      type="date"
      [(ngModel)]="reminderForm.appointmentDate"
      class="p-2 border rounded"
      placeholder="Ng√†y t√°i kh√°m"
    />
  </div>
  <div class="mt-3">
    <label class="mr-2">H√¨nh th·ª©c g·ª≠i:</label>
    <select [(ngModel)]="reminderForm.method" class="p-2 border rounded">
      <option value="email">Email</option>
    </select>
  </div>
  <div class="mt-4 flex gap-2">
    <button
      (click)="sendReminder()"
      class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
    >
      G·ª≠i
    </button>
    <button
      (click)="cancelReminder()"
      class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-600"
    >
      Hu·ª∑
    </button>
  </div>
</div>

<!-- CARD TH√îNG TIN CHI TI·∫æT B·ªÜNH NH√ÇN -->
<div *ngIf="selectedMemberInfo" class="mt-6 bg-white p-4 rounded border shadow max-w-md">
  <h3 class="text-lg font-semibold text-pink-700 mb-3">ü©∫ Th√¥ng tin b·ªánh nh√¢n</h3>
  <ul class="text-sm text-gray-800 space-y-1">
    <li><strong>H·ªç t√™n:</strong> {{ selectedMemberInfo.name }}</li>
    <li><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> {{ selectedMemberInfo.phoneNumber }}</li>
    <li><strong>Gi·ªõi t√≠nh:</strong> {{ selectedMemberInfo.gender }}</li>
    <li><strong>M√£ th√†nh vi√™n (Member_ID):</strong> {{ selectedMemberInfo.memberId }}</li>
    <li><strong>User ID:</strong> {{ selectedMemberInfo.userId }}</li>
  </ul>

  <div class="mt-4 text-right">
    <button
      (click)="selectedMemberInfo = null"
      class="bg-gray-500 text-white px-4 py-1 rounded hover:bg-gray-600"
    >
      ƒê√≥ng
    </button>
  </div>
</div>
